<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:icecore="http://www.icefaces.org/icefaces/core"
	xmlns:ace="http://www.icefaces.org/icefaces/components" xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
	<h:outputStylesheet library="css" name="jquery.growl.css" target="head" />
	<h:outputScript library="skriptit" name="jquery.min.js" target="head" />
	<h:outputScript library="skriptit" name="jquery.growl.js" target="head" />
	<style>
.kortti {
	width: 500px;
	height: 250px;
	-webkit-border-radius: 30px;
	-moz-border-radius: 30px;
	border-radius: 30px;
	border: 2px solid #000000;
	background-color: #f0f0f0;
	padding: 20px;
	-webkit-box-shadow: #787878 5px 5px 5px;
	-moz-box-shadow: #787878 5px 5px 5px;
	box-shadow: #787878 5px 5px 5px;
}

.logo {
	height: 180px;
}

.syotto {
	border: 2px solid black;
	width: 300px;
	height: 80px;
	background: #e0e0e0;
}

.korttinumero {
	font-size: 40px;
	text-align: center;
}

.nimi {
	font-size: 30px;
	font-weight: bold;
}

.treenit {
	border-collapse: separate;
	border-spacing: 0 1em;
}

.ylareuna {
	vertical-align: top;
}

.ikoni {
	margin-left: 30px;
	height: 64px;
	width: 64px;
}
</style>
</h:head>
<h:body onload="document.getElementById('formi:korttinumero').focus();">
	<f:view>
		<h:form id="formi">
			<h:panelGrid columns="3" columnClasses="ylareuna,ylareuna,ylareuna">
				<h:panelGroup>
					<div class="kortti">
						<table width="500" height="250">
							<tr>
								<td>
									<ace:graphicImage value="kuvat/logo.png" class="logo" rendered="#{treeniharrastaja == null}"/>
									<ace:graphicImage value="kuvat/mies.jpg" class="logo" rendered="#{ilmoittautuminen.mies}"/>
									<ace:graphicImage value="kuvat/nainen.jpg" class="logo" rendered="#{ilmoittautuminen.nainen}"/>
									<ace:graphicImage value="#{treeniharrastaja.kuva}" class="logo" rendered="#{ilmoittautuminen.omaKuva}"/>
								</td>
								<td><h:inputText value="#{ilmoittautuminen.korttinumero}" required="true" styleClass="syotto korttinumero"
										requiredMessage="Arvo on pakollinen" id="korttinumero"
										onkeydown="if (event.keyCode == 13) document.getElementById('formi:luekortti').click()" /> <h:commandButton
										action="#{ilmoittautuminen.lueKortti()}" value="." style="display:none" id="luekortti" /> <br /> <h:outputText
										value="#{treeniharrastaja.nimi}" rendered="#{treeniharrastaja != null}" styleClass="nimi" /></td>
							</tr>
							<tr>
								<td>
									<h:graphicImage value="/kuvat/vyöt/#{treeniharrastaja.tuoreinVyöarvo.id}.png" />									
								</td>
							</tr>
						</table>
					</div>
				</h:panelGroup>
				<ace:dataTable rendered="#{treeniharrastaja != null}" value="#{tulevatTreenit}" var="_treeni" selectionMode="single"
					stateMap="#{ilmoittautuminen.stateMap}" style="margin-left:20px; font-size:25px;"
					rowSelectListener="#{ilmoittautuminen.treeniValittu}">
					<ace:ajax event="select" render="@this formi:napit" execute="@this" />
					<ace:column headerText="Päivä">
						<h:outputText value="#{_treeni.päivä}" />
					</ace:column>
					<ace:column headerText="Alkaa">
						<h:outputText value="#{_treeni.alkaa}">
							<f:convertDateTime pattern="HH:mm" />
						</h:outputText>
					</ace:column>
					<ace:column headerText="Päättyy">
						<h:outputText value="#{_treeni.päättyy}">
							<f:convertDateTime pattern="HH:mm" />
						</h:outputText>
					</ace:column>
					<ace:column headerText="Treeni">
						<h:outputText value="#{_treeni.nimi}">
							<f:convertDateTime pattern="HH:mm" />
						</h:outputText>
					</ace:column>
				</ace:dataTable>
				<h:panelGrid id="napit">
					<h:commandButton image="kuvat/ok.jpg" value="tallenna" id="tallenna" rendered="#{ilmoittautuminen.treeniValittu}"
						styleClass="ikoni" action="#{ilmoittautuminen.tallenna}" />
					<h:commandButton image="kuvat/peruuta.jpg" value="peruuta" styleClass="ikoni" immediate="true"
						action="#{ilmoittautuminen.peruuta}" rendered="#{treeniharrastaja != null || ilmoittautuminen.treeniValittu}" />
				</h:panelGrid>
			</h:panelGrid>
		</h:form>
	</f:view>
</h:body>

</html>